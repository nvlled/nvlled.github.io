<html><head><title>2D game progress - logs and notes</title><link rel="stylesheet" href="./../assets/style.css"><link rel="stylesheet" href="./../../../../../assets/deno.land/x/speed_highlight_js@1.1.11/dist/themes/visual-studio-dark.css"><script>
      if (!location.pathname.match(/.html$/)) {
        // This makes sure that urls end with index.html
        // since the pages have relative paths in them.
        // For example: http://localhost:8000 -> http://localhost:8000/index.html
        // Omitting index.html breaks some links.
        // The generate HTML uses relative paths for easier deployment,
        // that they can be placed in any subdir and the links still work.
      
        var pathname = location.pathname;
        if (pathname[pathname.length-1] != "/") pathname += "/"
        location.pathname =  pathname + "index.html";
      }
    </script><style><style id="__twind">button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;margin:0;padding:0;line-height:inherit;color:inherit}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:Helvetica,sans-serif}table{text-indent:0;border-color:inherit;border-collapse:collapse}hr{height:0;color:inherit;border-top-width:1px}input::placeholder,textarea::placeholder{opacity:1;color:#a3a3a3}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}button{background-color:transparent;background-image:none}body{font-family:inherit;line-height:inherit}*,::before,::after{box-sizing:border-box;border:0 solid #e5e5e5}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}::-moz-focus-inner{border-style:none;padding:0}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}pre,code,kbd,samp{font-family:ui-monospace,monospace;font-size:1em}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre,fieldset,ol,ul{margin:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul,legend{padding:0}textarea{resize:vertical}button,[role="button"]{cursor:pointer}:-moz-focusring{outline:1px dotted ButtonText}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}summary{display:list-item}:root{-moz-tab-size:4;tab-size:4}ol,ul{list-style:none}img{border-style:solid}button,select{text-transform:none}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}sub{bottom:-0.25em}sup{top:-0.5em}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}::-webkit-search-decoration{-webkit-appearance:none}*{--tw-shadow:0 0 transparent}.divide-x-1>:not([hidden])~:not([hidden]){--tw-divide-x-reverse:0;border-right-width:calc(1px * var(--tw-divide-x-reverse));border-left-width:1px;border-left-width:calc(1px * calc(1 - var(--tw-divide-x-reverse)))}.text-blue-100{--tw-text-opacity:1;color:#dbeafe;color:rgba(219,234,254,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:#171717;color:rgba(23,23,23,var(--tw-text-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:#fafafa;background-color:rgba(250,250,250,var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:#e5e5e5;background-color:rgba(229,229,229,var(--tw-bg-opacity))}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);box-shadow:0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.bg-gray-500{--tw-bg-opacity:1;background-color:#737373;background-color:rgba(115,115,115,var(--tw-bg-opacity))}.bg-gray-700{--tw-bg-opacity:1;background-color:#404040;background-color:rgba(64,64,64,var(--tw-bg-opacity))}.border-blue-100{--tw-border-opacity:1;border-color:#dbeafe;border-color:rgba(219,234,254,var(--tw-border-opacity))}.text-base{font-size:1rem;line-height:1.5rem}.divide-black>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:#000;border-color:rgba(0,0,0,var(--tw-divide-opacity))}.text-xl{font-size:1.25rem;line-height:1.75rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.my-3{margin-bottom:0.75rem;margin-top:0.75rem}.bg-gray-300{--tw-bg-opacity:1;background-color:#d4d4d4;background-color:rgba(212,212,212,var(--tw-bg-opacity))}.m-auto{margin:auto}.p-2{padding:0.5rem}.w-full{width:100%}.h-0\.5{height:0.125rem}.hidden{display:none}.flex{display:flex}.h-10{height:2.5rem}.m-1{margin:0.25rem}.p-1{padding:0.25rem}.h-1{height:0.25rem}.justify-end{justify-content:flex-end}.items-center{align-items:center}.border{border-width:1px}.leading-tight{line-height:1.25}.whitespace-pre{white-space:pre}.divide-dotted>:not([hidden])~:not([hidden]){border-style:dotted}.text-center{text-align:center}.whitespace-nowrap{white-space:nowrap}.flex-grow-1{flex-grow:1}.text-right{text-align:right}.mr-3{margin-right:0.75rem}.max-w-4xl{max-width:56rem}.mr-5{margin-right:1.25rem}.items-start{align-items:flex-start}.pr-2{padding-right:0.5rem}.mb-4{margin-bottom:1rem}.font-bold{font-weight:700}.border-0{border-width:0px}.rounded{border-radius:0.25rem}.drop-shadow-xl{--tw-drop-shadow:drop-shadow(0 20px 13px rgba(0,0,0,0.03)) drop-shadow(0 8px 5px rgba(0,0,0,0.08))}@media (min-width:640px){.sm\:block{display:block}}@media (min-width:768px){.md\:w-10{width:2.5rem}}@media (min-width:768px){.md\:block{display:block}}@media (min-width:768px){.md\:p-3{padding:0.75rem}}@media (min-width:1024px){.lg\:w-4\/5{width:80%}}.tw-nzxedc blockquote{font-style:italic;padding-left:0.75rem;border-left-width:8px;--tw-border-opacity:1;border-color:#737373;border-color:rgba(115,115,115,var(--tw-border-opacity))}.tw-m3v340 a{-webkit-text-decoration:underline;text-decoration:underline;--tw-text-opacity:1;color:#1e3a8a;color:rgba(30,58,138,var(--tw-text-opacity))}.tw-m3v340 a:visited{--tw-text-opacity:1;color:#1e40af;color:rgba(30,64,175,var(--tw-text-opacity))}.tw-m3v340 h1{font-size:1.25rem;line-height:1.75rem}.tw-m3v340 h2{font-size:1.125rem;line-height:1.75rem}.tw-m3v340 h3{font-size:1rem;line-height:1.5rem}.tw-m3v340 p{margin-bottom:0.5rem;margin-top:0.5rem}.tw-m3v340{margin-bottom:0.5rem;margin-top:0.5rem}.tw-nzxedc{max-width:1200px}.tw-m3v340 h1,.tw-m3v340 h2,.tw-m3v340 h3,.tw-m3v340 h4,.tw-m3v340 h5{font-weight:700}.tw-m3v340 ul{margin-left:1.25rem}.tw-m3v340 ul li{list-style-type:disc}</style></style></head><body class="lg:w-4/5 m-auto bg-gray-50 tw-nzxedc"><div class="flex bg-gray-700 text-blue-100 h-10 items-center undefined"><div class="m-1 p-1 border border-blue-100 undefined"><a href="./../index.html">⌨</a></div><span>&nbsp;</span><div class="leading-tight md:block hidden whitespace-pre undefined"><a href="./../index.html">logs and notes</a></div><span class="hidden sm:block md:w-10">&nbsp;</span><div class="flex items-center divide-x-1 divide-dotted"><div class="p-2 md:p-3 text-center whitespace-nowrap"><a title="notes" href="./../notes.html" class="flex"><span>⛾</span><span>&nbsp;</span><span class="hidden sm:block">notes</span></a></div><div class="p-2 md:p-3 text-center whitespace-nowrap"><a title="screenshots" href="./../screenshots/index.html" class="flex"><span>֎</span><span>&nbsp;</span><span class="hidden sm:block">screenshots</span></a></div><div class="p-2 md:p-3 text-center whitespace-nowrap"><a title="projects" href="./../projects.html" class="flex"><span>⌬</span><span>&nbsp;</span><span class="hidden sm:block">projects</span></a></div></div><div class="flex-grow-1 text-right mr-3 undefined"><a class="flex justify-end" href="./../about.html"><span>⌭</span><span>&nbsp;</span><span class="hidden sm:block">about</span></a></div></div><div class="bg-gray-200 p-2 shadow-xl drop-shadow-xl"><div class="text-xl flex items-start undefined"><div class="flex undefined"><div class="undefined">⛾</div></div><span>&nbsp;</span><div class="w-full undefined"><div class="flex items-center undefined"><a href="" class="text-gray-900">2D game progress</a></div><div class="flex items-center text-base divide-black divide-x-1 divide-dotted"><div class="pr-2 undefined">2023-03-14 12:06:19</div><div class="px-2 undefined">3 days ago</div><div class="px-2 undefined"></div></div><div class="mb-4 undefined"></div><div class="text-base max-w-4xl mr-5 tw-m3v340">Tadah, after an extended period of i-have-idea-what-im-doing game development, I finally managed to <s>puke</s> create something:<img src="./../../../../../assets/notes/dgen.gif"><div class="my-3 undefined"></div>And it's barely even a game. And it looks like shit. But, it's a good start, I think? That sure took way more effort that I expected. For the temporary(?) art, I used <a href="https://sanderfrenken.github.io/Universal-LPC-Spritesheet-Character-Generator/">LPC spritesheet generator</a> for the ugly looking player goblin, and the <a href="https://cupnooble.itch.io/sprout-lands-asset-pack?download">this one</a> for the tilemap.<div class="my-3 undefined"></div>The following are my rough recollections of some minor issues I had.<div class="my-3 undefined"></div><div><h1 class="font-bold">Tile mapping</h1><div class="h-1 undefined"></div></div>Tilemap editing workflow isn't as efficient as I expected. To be clear, it's way more efficient compared to manually doing it by code on a plain text file. But it's still rough around the edges, and still have to do a lot of manual work to do the bare minimum. Maybe I'm still just getting used to it, until I just do it automatically without thinking about it.<div class="my-3 undefined"></div><div><h1 class="font-bold">State transitions and Coroutines</h1><div class="h-1 undefined"></div></div>I tried a coroutine-like approach first for state transitions using <code>await ToSignal(...)</code>, but it turned about to behave unpredictably. For now, I just used objects to represent state, transitions are done by swapping out these objects. A little verbose, but oh well.<div class="my-3 undefined"></div><div><h1 class="font-bold">Synchronizing animations</h1><div class="h-1 undefined"></div></div>In the gif above, the spritesheet I used has quite a delay from start animation until the part where it's about to fire the arrow. So from the input event, I can't just spawn the banana immediately, it has to wait for a bit until the right animation frame, otherwise it wouldn'T look right.<div class="my-3 undefined"></div>One way to solve this is to just hardcode the delay. The problem with this is that I have to update this delay everytime I change the art or the FPS of each animation.<div class="my-3 undefined"></div>Maybe there's a better way to do this so that the art is perfectly synchronized with the player state automatically? Maybe, but I'm not going to spend the next week thinking about it. This is gamedev, shit code with results is better than theoretically elegant code that was abandoned.<div class="my-3 undefined"></div>So yeah, fuck it, I'll just hardcode some values to make the art synchronized with state. But instead of delay, I just hardcode the frame index, which is slightly better than the delay, but still would break if I change the art later on.<hr style="height: 1px;" class="w-full my-3 bg-gray-500 border-0 rounded bg-gray-300"><div class="my-3 undefined"></div><div><h1 class="font-bold">Additions/Revisions to game design</h1><div class="h-1 undefined"></div></div>On a whim, I used bananas as the projectile of the crossbow. While playtesting, I thought maybe I could just create some shitty farm-themed game instead, where humans invade the player goblin's thriving farm because he failed to secure a legal permit, and because he's too ugly to be left alive. Wait, I hear another backstory coming in...<div class="my-3 undefined"></div><div><h1 class="font-bold">Backstory 2</h1><div class="h-1 undefined"></div></div>The player plays as the goblin who was vanished from his own kingdom. After travelling aimlessly, he found an abandoned ranch where he settled down. After a while, he made a place for himself. He restored the farm, he fixed the fences, tilled the soil, and planted crops and trees.<div class="my-3 undefined"></div>The villagers took notice of the ranch that mysteriously came back to life. Without restraint, they pillaged the crops, and hunted the animals for each their own necessities.<div class="my-3 undefined"></div>Seeing his life once again desperately holding on to a thin thread of fate, this time the goblin chose to assert himself and defend what's important to him. The goblin fought back and attacked the villagers. So the story goes, and the war beings...!?<div class="my-3 undefined"></div><div><h1 class="font-bold">Farm defence mechanics</h1><div class="h-1 undefined"></div></div><ul><li>Villagers attack during the day</li><li>Trees and plants produces fruits</li><li>The player will pick this fruits and use them as bullets</li><li>Other things that can also be used as bullets: chickens, cows, wounded villagers</li><li>Invaders drop loots: seed, food, gold</li><li>The player must defend the farm from villagers</li><li>The gold can be used to bribe the villagers away for a day.</li><li>The villagers can attack the player, the plants, trees, and your house.</li><li>The game ends when the player dies or the house goes down.</li><li>Player has limited inventory/slots for projectiles.</li><li>One level only for now, fixed map layout, with increasing waves of difficulty</li><li>To make things PG, the villagers don't die. They just flee in the forest when they take enough damage.</li></ul><div class="my-3 undefined"></div><div><h1 class="font-bold">Village assault mechanics</h1><div class="h-1 undefined"></div></div><ul><li>Night-time is for rest, farming or village assault</li><li>Night-time is for break-time. It's designed for players like me who has difficult time playing intensively at long intervals. The assault for instance</li><li>Farming mechanics is only available at night.</li><li>The player must plant the seeds</li><li>The player must water the plants to keep them alive</li></ul><div><h1 class="font-bold">Other notes</h1><div class="h-1 undefined"></div></div><ul><li>day-night cycle should be longer (maybe 30min)</li></ul><hr style="height: 1px;" class="w-full my-3 bg-gray-500 border-0 rounded bg-gray-300">This may seem like I'm biting more than I can chew and scope, but for now I only plan on doing the farm defence first, iteratively adding each game mechanic so that the game is always in a playable state. If I lost interest midway because it became too tedious to continue or the game turned out to be not fun, then at least there was a tangible result in the end, and I can just quit anytime and move on to something else.<hr style="height: 1px;" class="w-full my-3 bg-gray-500 border-0 rounded bg-gray-300">TODO:<ul><li>go over https://www.gdquest.com/tutorial/godot/2d</li><li>try coroutines again with scenetree.signalname.processframe</li><li>trees and houses nodes<ul><li>read https://docs.godotengine.org/en/stable/tutorials/2d/particle_systems_2d.html</li><li>house cracks and fires</li><li>house debris after it's destroyed</li><li>tree fires</li></ul></li><li>inventory, show in HUD one row of items on the bottom</li><li>manually create separate nodes for each bullets/items, since they will have each their own collision shape, health and damage.</li><li>Show current projectile to fire in the players head</li><li>loot pickup</li><li>villager nodes</li><li>basic farm map, should have at least: trees, one house, some plants also some animals</li><li>pathfinding and simple AI for villagers and animals</li></ul></div></div></div></div><footer class="w-full h-0.5 bg-gray-500"></footer><br></body></html>